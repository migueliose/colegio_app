<!-- gestioncolegio/docentes/components/calificaciones_pendientes.html -->
{% load static docente_filters %}
<div class="card border-0 shadow-sm h-100 card-hover">
    <div class="card-header bg-white border-0 py-3">
        <div class="d-flex justify-content-between align-items-center">
            <h5 class="card-title mb-0">
                <i class="fas fa-edit text-danger me-2"></i>
                Calificaciones Pendientes
            </h5>
            <span class="badge bg-danger">{{ calificaciones_pendientes|default:0 }}</span>
        </div>
    </div>
    <div class="card-body">
        {% if calificaciones_pendientes > 0 %}
            <div class="alert alert-warning small mb-3">
                <i class="fas fa-exclamation-triangle me-2"></i>
                Tienes {{ calificaciones_pendientes }} calificación{{ calificaciones_pendientes|pluralize }} pendiente{{ calificaciones_pendientes|pluralize }}
            </div>
            
            {% if periodo_actual %}
            <div class="mb-3">
                <small class="text-muted d-block">Período actual:</small>
                <strong>{{ periodo_actual.periodo.nombre }}</strong>
                <small class="text-muted d-block">
                    {{ periodo_actual.fecha_inicio|date:"d/m/Y" }} - {{ periodo_actual.fecha_fin|date:"d/m/Y" }}
                </small>
            </div>
            {% endif %}
            
            <div class="d-grid gap-2">
                <a href="{% url 'docentes:calificar_notas' %}" class="btn btn-danger btn-sm">
                    <i class="fas fa-edit me-1"></i>Ir a Calificar
                </a>
                <a href="{% url 'docentes:lista_notas_docente' %}" class="btn btn-outline-secondary btn-sm">
                    <i class="fas fa-list me-1"></i>Ver Todas las Notas
                </a>
            </div>
            
            {% if mis_asignaturas %}
            <div class="mt-3 pt-3 border-top">
                <small class="text-muted d-block mb-2">Por asignatura:</small>
                {% for asignatura in mis_asignaturas|slice:":3" %}
                <div class="d-flex justify-content-between align-items-center small py-1">
                    <span class="text-truncate" style="max-width: 70%;">{{ asignatura.asignatura.nombre }}</span>
                    <span class="badge bg-light text-dark">
                        {% with estudiantes=asignatura|count_estudiantes_asignatura %}
                            {{ estudiantes }} est.
                        {% endwith %}
                    </span>
                </div>
                {% endfor %}
            </div>
            {% endif %}
            
        {% else %}
            <div class="text-center text-muted py-4">
                <i class="fas fa-check-circle display-4 text-success d-block mb-3"></i>
                <h6>¡Todo al día!</h6>
                <p class="small mb-3">No tienes calificaciones pendientes</p>
                <a href="{% url 'docentes:calificar_notas' %}" class="btn btn-outline-success btn-sm">
                    <i class="fas fa-edit me-1"></i>Calificar Estudiantes
                </a>
            </div>
        {% endif %}
    </div>
</div>